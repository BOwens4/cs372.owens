// Cryptography Assg 01
// Braden Owens
// 9/4/2022


// The three pages of text I chose for this assignment is pages from my favorite book old yeller.
// I had 2 major issues with this program that I was not able to resolve.
// //1. The program would not accept the full three pages of text without throwing an error about truncating the length.
// //2. I was not able to get my program to fully encrypt and decrypt the message, only the first word and a letter. I did it all manually.
// Below is my code.
#include <string>
#include <iostream>
#include <bitset>
#include <algorithm>

std::bitset<32> to_bitset(std::string s)
{
    auto binary = [](char c) { return c == '0' || c == '1'; };
    auto not_binary = [binary](char c) { return !binary(c); };

    s.erase(std::remove_if(begin(s), end(s), not_binary), end(s));

    return std::bitset<32>(s);
}

std::string to_string(std::bitset<32> bs)
{
    return bs.to_string();
}

int main()
{
    // The first thing I would like to do is take the seed of my key
    // and create a pseduorandom number using a generator. I am using the middle square method.
    // I chose 75 as my beginning seed for the middle square method generator.
    // This resulted in the seeds of my key being 75,62,and 84.
    // I was not sure how many random numbers to generate, so I stopped at 3. 
   
    // This resulted in my key:
    // 1001011 (75) in binary
    // 111110 (62) in binary
    // 1010100 (84) in binary
    // putting these together in the order of 75,62,84
    // 
    // The KEY is: 10010111111101010100.
    // We must then combine this with XOR to create our Ciphertext.


    std::string str1= "10010111111101010100 "; //KEY
    std::string str2 = "01010111 01100101 00100000 01100011 01100001 01101100 01101100 01100101 01100100 00100000 01101000 01101001 01101101 00100000 01001111 01101100 01100100 00100000 01011001 01100101 01101100 01101100 01100101 01110010 00101110 00100000 01010100 01101000 01100101 00100000 01101110 01100001 01101101 01100101 00100000 01101000 01100001 01100100 00100000 01100001 00100000 01110011 01101111 01110010 01110100 00100000 01101111 01100110 00100000 01100100 01101111 01110101 01100010 01101100 01100101 00100000 01101101 01100101 01100001 01101110 01101001 01101110 01100111 00101110 00100000 01001111 01101110 01100101 00100000 01110000 01100001 01110010 01110100 00100000 01101101 01100101 01100001 01101110 01110100 00100000 01110100 01101000 01100001 01110100 00100000 01101000 01101001 01110011 00100000 01110011 01101000 01101111 01110010 01110100 00100000 01101000 01100001 01101001 01110010 00100000 01110111 01100001 01110011 00100000 01100001 00100000 01100100 01101001 01101110 01100111 01111001 00100000 01111001 01100101 01101100 01101100 01101111 01110111 00101100 00100000 01100001 00100000 01100011 01101111 01101100 01101111 01110010 00100000 01110100 01101000 01100001 01110100 00100000 01110111 01100101 00100000 01100011 01100001 01101100 01101100 01100101 01100100 00100000 01111001 01100101 01101100 01101100 01100101 01110010 00100000 01101001 01101110 00100000 01110100 01101000 01101111 01110011 01100101 00100000 01100100 01100001 01111001 01110011 00101110 00100000 01010100 01101000 01100101 00100000 01101111 01110100 01101000 01100101 01110010 00100000 01101101 01100101 01100001 01101110 01110100 00100000 01110100 01101000 01100001 01110100 00100000 01110111 01101000 01100101 01101110 00100000 01101000 01100101 00100000 01101111 01110000 01100101 01101110 01100101 01100100 00100000 01101000 01101001 01110011 00100000 01101000 01100101 01100001 01100100 00101100 00100000 01110100 01101000 01100101 00100000 01110011 01101111 01110101 01101110 01100100 00100000 01101000 01100101 00100000 01101100 01100101 01110100 00100000 01101111 01110101 01110100 00100000 01100011 01100001 01101101 01100101 00100000 01100011 01101100 01101111 01110011 01100101 01110010 00100000 01110100 01101111 00100000 01100010 01100101 01101001 01101110 01100111 00100000 01100001 00100000 01111001 01100101 01101100 01101100 00100000 01110100 01101000 01100001 01101110 00100000 01100001 00100000 01100010 01100001 01110010 01101011 00001101 00001010";
    auto result = to_string(to_bitset(str1) ^ to_bitset(str2));// above is the three sentence selected converted to binary
    std::cout << "below is the ciphertext" << std::endl;
    std::cout << result << std::endl;
    std::string str3 = "10010111111101010100 ";
    std::string str4 = "01010111011011000101111100110111";
    auto result2 = to_string(to_bitset(str3) ^ to_bitset(str4));
    std::cout << "below is the decrypted message which just needs to be converted to binary" << std::endl;
    std::cout << result2 << std::endl;
    // I cannot get my code to translate the entire message, what results is only the first word and letter of the paragraph, which is "We c"
    // However, when I do these calculations by an online calculator, I get the results you'd expect.
    // The paragraph I began with is:
    // We called him Old Yeller. The name had a sort of double meaning. One part meant that his short hair was a dingy yellow, a color that we called yeller in those days. The other meant that when he opened his head, the sound he let out came closer to being a yell than a bark. 
    // I then converted it to binary, XORd it with the key, xord the result with the key again, and you arrive back at the same paragraph
   // The RESULT OF THE XOR BETWEEN KEY AND BINARY TEXT (ciphertext): 010101110110010100100000011000110110000101101100011011000110010101100100001000000110100001101001011011010010000001001111011011000110010000100000010110010110010101101100011011000110010101110010001011100010000001010100011010000110010100100000011011100110000101101101011001010010000001101000011000010110010000100000011000010010000001110011011011110111001001110100001000000110111101100110001000000110010001101111011101010110001001101100011001010010000001101101011001010110000101101110011010010110111001100111001011100010000001001111011011100110010100100000011100000110000101110010011101000010000001101101011001010110000101101110011101000010000001110100011010000110000101110100001000000110100001101001011100110010000001110011011010000110111101110010011101000010000001101000011000010110100101110010001000000111011101100001011100110010000001100001001000000110010001101001011011100110011101111001001000000111100101100101011011000110110001101111011101110010110000100000011000010010000001100011011011110110110001101111011100100010000001110100011010000110000101110100001000000111011101100101001000000110001101100001011011000110110001100101011001000010000001111001011001010110110001101100011001010111001000100000011010010110111000100000011101000110100001101111011100110110010100100000011001000110000101111001011100110010111000100000010101000110100001100101001000000110111101110100011010000110010101110010001000000110110101100101011000010110111001110100001000000111010001101000011000010111010000100000011101110110100001100101011011100010000001101000011001010010000001101111011100000110010101101110011001010110010000100000011010000110100101110011001000000110100001100101011000010110010000101100001000000111010001101000011001010010000001110011011011110111010101101110011001000010000001101000011001010010000001101100011001010111010000100000011011110111010101110100001000000110001101100001011011010110010100100000011000110110110001101111011100110110010101110010001000000111010001101111001000000110001001100101011010010110111001100111001000000110000100100000011110010110010101101100011011000010000001110100011010000110000101101110001000000110000100100000011000100110000101110010011000100111001001011110
    // The ciphertext converted back, by XORing CIPHERTEXT and KEY(binary result of plain text): 010101110110010100100000011000110110000101101100011011000110010101100100001000000110100001101001011011010010000001001111011011000110010000100000010110010110010101101100011011000110010101110010001011100010000001010100011010000110010100100000011011100110000101101101011001010010000001101000011000010110010000100000011000010010000001110011011011110111001001110100001000000110111101100110001000000110010001101111011101010110001001101100011001010010000001101101011001010110000101101110011010010110111001100111001011100010000001001111011011100110010100100000011100000110000101110010011101000010000001101101011001010110000101101110011101000010000001110100011010000110000101110100001000000110100001101001011100110010000001110011011010000110111101110010011101000010000001101000011000010110100101110010001000000111011101100001011100110010000001100001001000000110010001101001011011100110011101111001001000000111100101100101011011000110110001101111011101110010110000100000011000010010000001100011011011110110110001101111011100100010000001110100011010000110000101110100001000000111011101100101001000000110001101100001011011000110110001100101011001000010000001111001011001010110110001101100011001010111001000100000011010010110111000100000011101000110100001101111011100110110010100100000011001000110000101111001011100110010111000100000010101000110100001100101001000000110111101110100011010000110010101110010001000000110110101100101011000010110111001110100001000000111010001101000011000010111010000100000011101110110100001100101011011100010000001101000011001010010000001101111011100000110010101101110011001010110010000100000011010000110100101110011001000000110100001100101011000010110010000101100001000000111010001101000011001010010000001110011011011110111010101101110011001000010000001101000011001010010000001101100011001010111010000100000011011110111010101110100001000000110001101100001011011010110010100100000011000110110110001101111011100110110010101110010001000000111010001101111001000000110001001100101011010010110111001100111001000000110000100100000011110010110010101101100011011000010000001110100011010000110000101101110001000000110000100100000011000100110000101110010011010110000110100001010
    // This binary result converted back to plaintext is the paragraph from earlier:
    // We called him Old Yeller.The name had a sort of double meaning. One part meant that his short hair was a dingy yellow, a color that we called yeller in those days.The other meant that when he opened his head, the sound he let out came closer to being a yell than a bark.

}

